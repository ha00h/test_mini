# 점수 측정 및 표시 데모

주행 거리(km)와 생존 시간(s)을 기반으로 점수를 계산하고, 실시간으로 HUD에 반영하는 간단한 웹 데모입니다. 실제 게임/시뮬레이션에서 재사용할 수 있도록 `ScoreManager` 클래스를 별도로 두어 거리·시간·속도 데이터를 주입하면 곧바로 UI에 반영되도록 구성했습니다.

## 주요 기능
- 100 m 단위의 거리 가중치(기본 5점)와 1초 단위의 시간 가중치(기본 2점)로 총점을 산출
- 주행 시작/일시 정지/초기화, 스냅샷 로그, 목표 속도 조절 UI 제공
- DOM 업데이트 로직을 `ScoreManager` 한 곳에서 관리하여 다른 화면에서도 쉽게 재사용
- `window.applyScoreState({ distanceMeters, elapsedMs, speedKph, running })` 메서드로 외부 시스템 상태를 바로 반영 가능

## 실행 방법
정적 파일이라 별도의 빌드 없이 웹 서버만 있으면 됩니다.

```bash
npx serve .
# 또는
python3 -m http.server
```

브라우저에서 `http://localhost:3000`(serve 기본 포트) 혹은 8000(파이썬)으로 접속하면 HUD를 확인할 수 있습니다.

## 통합 가이드
게임 루프가 이미 존재한다면 아래와 같이 상태를 동기화할 수 있습니다.

```js
// 예시: 차량 위치/시간을 게임엔진에서 계산한 뒤 주입
window.applyScoreState({
  distanceMeters: currentDistance,
  elapsedMs: performance.now() - roundStartTime,
  speedKph: currentSpeed,
  running: isAlive,
});
```

필요 시 `main.js`의 가중치(`distanceWeight`, `timeWeight`, `distanceUnit`)만 조정하면 동일한 UI를 유지한 채 다른 배점 정책을 적용할 수 있습니다.

## 파일 구성
- `index.html`: HUD 구조 및 컨트롤
- `styles.css`: 카드형 대시보드 스타일
- `main.js`: 점수 계산, UI 갱신 로직, 외부 연동 API
# 미니 프로젝트 – 레이싱 이동 로직

플레이어 차량이 3개 이상의 차선을 좌우 입력으로 전환하면서 상대 차량을 피할 수 있도록 한정된 이동/충돌 로직을 파이썬으로 구성했습니다. `src/racing/game.py`에 핵심 규칙이 구현되어 있으며, `tests/test_game.py`로 주요 시나리오를 검증합니다.

## 빠른 사용 예

```python
from racing import LaneChangeInput, RacingGame

game = RacingGame(lane_count=3)
game.spawn_opponent(lane_index=2, distance_ahead=6.0)

# 좌측으로 이동 시도
game.advance(0.016, opponent_speed=0.0, command=LaneChangeInput.LEFT)

# 20 m/s 속도로 접근 중인 차량 시뮬레이션 및 충돌 검사
collision = game.advance(0.25, opponent_speed=20.0)
```

## 테스트 실행

```bash
pytest
```

테스트는 차선 경계, 입력 쿨다운, 충돌 판정, 차량 제거 로직을 포괄적으로 확인합니다.
## 기본 게임 화면 구성
- **전체 뷰포트**: 16:9 비율(예: 1280×720) 기준, 중앙에 트랙을 배치하고 좌우는 배경/패럴랙스 장식으로 사용.
- **배경 레이어**: 멀리 있는 도시/사막 실루엣 → 중간 레이어(가로수, 가로등) → 전경(도로 가장자리) 3단 레이어로 스크롤 속도를 다르게 하여 깊이감 제공.

### 3차선 트랙 레이아웃
- **트랙 폭**: 전체 폭의 60%를 사용하고 중앙 정렬, 각 레인의 너비는 동일(예: 240px × 3).
- **가이드 라인**: 흰색 점선/고체선을 교차 사용해 중앙선, 차선 경계를 명확히 표현.
- **충돌 영역**: 각 레인마다 히트박스를 설정(폭 200px, 높이 300px 권장)하여 차량/장애물의 충돌 판정을 단순화.

### 플레이어 차량 영역
- **기본 위치**: 화면 하단 25% 지점, 중앙 레인에 기본 배치.
- **차량 크기**: 140×260px 정도로 레인 폭 대비 60% 점유, 이동 애니메이션은 좌우 120px 이동(레인 간 거리) + 0.2초 이징.
- **UI 연동**: 차량 위에 체력 바 또는 쉴드 아이콘을 띄울 수 있도록 상단 60px 여유 영역을 확보.

### 장애물 배치 영역
- **스폰 라인**: 화면 상단에서 15% 아래 위치한 가상의 가로선에서 장애물 인스턴스를 생성.
- **패턴 관리**: 단일 장애물(콘, 트럭)과 복합 패턴(두 레인 동시) 두 가지 유형을 JSON/스크립트로 정의해 재사용.
- **경고 UI**: 화면 밖에서 빠르게 접근하는 장애물은 해당 레인 상단에 붉은 화살표 경고를 표시.

### UI 요소 (HUD)
- **상단 중앙**: `SCORE`, `DISTANCE` 텍스트와 가독성 높은 세그먼트 폰트 사용.
- **상단 좌측**: 플레이어 체력/실드/남은 생명 수 아이콘 묶음.
- **상단 우측**: 속도 게이지(원형 게이지 + 숫자 km/h)와 일시정지 버튼.
- **하단**: 미션 상태/파워업 쿨다운 등을 표시하는 투명 패널, 모바일 대응을 위해 버튼 영역은 96px 이상 확보.

### 인터랙션 및 상태 표현
- **피버/부스트 모드**: 트랙 주변 네온 라이트 색상을 변경하고, 차량 잔상 효과로 상태를 즉시 인지.
- **피해 표시**: 차량에 스파크 파티클 + 화면 전체의 짧은 흔들림(10px, 0.1초)으로 피드백.
- **일시정지 오버레이**: 반투명 어두운 배경 + 큰 `PAUSED` 텍스트, 재개/설정/종료 버튼 3종으로 구성.

이 구조를 기반으로 와이어프레임을 제작하고, 에셋(차량, 장애물, UI 위젯)을 동일한 해상도와 색상 팔레트 가이드에 맞춰 준비하면 됩니다.
